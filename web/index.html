<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ –ö–∏–Ω–æ–º–∞–Ω</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* –û–±—â–∏–µ —Å–±—Ä–æ—Å—ã –∏ –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%); /* –ì–ª—É–±–æ–∫–∏–π —Ç–µ–º–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
            align-items: flex-start; /* –ü—Ä–∏–∂–∏–º–∞–µ–º –∫ –≤–µ—Ä—Ö—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            padding: 40px 20px; /* –û—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            overflow-y: auto; /* –î–ª—è —Å–∫—Ä–æ–ª–ª–∞, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–Ω–æ–≥–æ */
        }

        /* –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –æ–∫–Ω–æ */
        .app-container {
            background: rgba(0, 0, 0, 0.7); /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω */
            backdrop-filter: blur(15px); /* –°–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ */
            border: 1px solid rgba(229, 9, 20, 0.4); /* –ö—Ä–∞—Å–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ */
            border-radius: 25px; /* –°–∏–ª—å–Ω–æ –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5); /* –ë–æ–ª—å—à–∞—è —Ç–µ–Ω—å */
            width: 100%;
            max-width: 800px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞, –∫–∞–∫ –≤ –≤–∏–¥–µ–æ */
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px; /* –ü—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏ */
            animation: fadeIn 0.8s ease-out; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
        .app-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 36px;
            font-weight: bold;
            color: #e50914; /* –Ø—Ä–∫–∏–π –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç */
            text-shadow: 0 0 12px rgba(229, 9, 20, 0.8);
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 16px;
            opacity: 0.7;
        }

        /* –°–µ–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø–æ–∏—Å–∫, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ) */
        .control-section {
            display: flex;
            flex-direction: column;
            gap: 15px; /* –ü—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
            width: 100%;
        }

        .search-input {
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            color: white;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #f40612;
            box-shadow: 0 0 12px rgba(229, 9, 20, 0.6);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap; /* –î–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–Ω–æ–ø–æ–∫ */
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #e50914, #f40612);
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #f40612, #ff3842);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        /* –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
            color: #e50914;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(229, 9, 20, 0.7);
        }

        .stat-label {
            font-size: 13px;
            opacity: 0.8;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* –°–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤ */
        .movies-list {
            display: flex;
            flex-direction: column;
            gap: 15px; /* –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å–ø–∏—Å–∫–∞ */
            width: 100%;
        }

        .movie-card-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .movie-card-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            border-color: #f40612;
        }

        .movie-card-item .poster-thumb {
            width: 60px; /* –ú–∏–Ω–∏–∞—Ç—é—Ä–Ω—ã–π –ø–æ—Å—Ç–µ—Ä */
            height: 90px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0; /* –ù–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
            background: linear-gradient(135deg, #333, #555);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-size: 30px;
        }
        .movie-card-item .poster-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .movie-card-item .info {
            flex-grow: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
        }

        .movie-card-item .title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #fff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .movie-card-item .meta {
            font-size: 13px;
            opacity: 0.7;
        }

        .movie-card-item .actions {
            display: flex;
            gap: 8px;
            flex-shrink: 0; /* –ù–µ —Å–∂–∏–º–∞—é—Ç—Å—è */
        }

        .movie-card-item .btn-action {
            padding: 8px 12px;
            font-size: 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: background 0.2s ease;
        }
        .movie-card-item .btn-action:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .movie-card-item .btn-action.play {
            background: #e50914;
            border-color: #e50914;
        }
        .movie-card-item .btn-action.play:hover {
            background: #f40612;
        }
        .movie-card-item .btn-action.delete {
            background: #dc3545;
            border-color: #dc3545;
        }
        .movie-card-item .btn-action.delete:hover {
            background: #c82333;
        }

        /* –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏/–ø—É—Å—Ç–æ—Ç—ã/–æ—à–∏–±–∫–∏ */
        .loading, .empty-state {
            text-align: center;
            padding: 50px 20px;
            font-size: 18px;
            opacity: 0.7;
            color: rgba(255, 255, 255, 0.7);
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: #e50914;
            font-size: 24px;
        }
        .empty-state p {
            font-size: 16px;
            line-height: 1.5;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä) */
        .modal {
            display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: flex; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #1a1a2e;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(229, 9, 20, 0.4);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.3s ease-out; /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ */
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è close-btn */
        }
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞ */
        #videoPlayerModal .modal-content {
            max-width: 90%; /* –®–∏—Ä–µ –¥–ª—è –≤–∏–¥–µ–æ */
            width: 90%; /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
            height: auto; /* –í—ã—Å–æ—Ç–∞ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É */
            max-height: 90vh; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px; /* –ú–µ–Ω—å—à–µ –ø–∞–¥–¥–∏–Ω–≥–∞ –¥–ª—è –≤–∏–¥–µ–æ */
        }

        #videoPlayerModal video {
            width: 100%;
            height: auto;
            max-height: 70vh; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –≤–∏–¥–µ–æ */
            border-radius: 15px;
            background-color: black;
            display: block;
            margin-bottom: 15px;
        }
        #videoPlayerModal .video-info {
            text-align: center;
            margin-bottom: 15px;
        }
        #videoPlayerModal .video-title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }
        #videoPlayerModal .video-meta {
            font-size: 14px;
            opacity: 0.8;
        }
        #videoPlayerModal .video-error-message {
            color: #dc3545;
            font-size: 16px;
            margin-top: 10px;
            text-align: center;
        }


        @keyframes slideIn {
            from { opacity: 0; transform: translate(-50%, -40%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
            width: 100%; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
        }

        .modal-title {
            font-size: 22px;
            font-weight: bold;
            color: #e50914;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            transition: transform 0.2s ease, color 0.2s ease;
        }
        .close-btn:hover {
            color: #f40612;
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            opacity: 0.8;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #e50914;
            box-shadow: 0 0 8px rgba(229, 9, 20, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }
        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
        }
        .modal-actions .btn {
            flex-grow: 1; /* –ö–Ω–æ–ø–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –±—É–¥—É—Ç —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å—Å—è */
            padding: 10px 20px;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }
            .app-container {
                padding: 20px;
                border-radius: 15px;
            }
            .app-header .logo {
                font-size: 30px;
            }
            .control-section {
                gap: 10px;
            }
            .search-input {
                padding: 12px 20px;
                font-size: 14px;
            }
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
            .button-group {
                flex-direction: column;
                gap: 10px;
            }
            .stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .stat-number {
                font-size: 24px;
            }
            .stat-label {
                font-size: 12px;
            }
            .movie-card-item {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px;
                gap: 10px;
            }
            .movie-card-item .poster-thumb {
                width: 50px;
                height: 75px;
            }
            .movie-card-item .info {
                width: 100%;
            }
            .movie-card-item .actions {
                width: 100%;
                justify-content: center;
            }
            .movie-card-item .btn-action {
                flex-grow: 1;
            }
            .modal-content {
                padding: 20px;
                border-radius: 15px;
            }
            .modal-title {
                font-size: 20px;
            }
            .close-btn {
                font-size: 24px;
            }
        }
        #videoPlayerModal .modal-content {
            max-width: 95%;
            width: 95%;
            padding: 15px;
        }
        #videoPlayerModal video {
            max-height: 60vh;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <div class="logo">üé¨ –ö–∏–Ω–æ–º–∞–Ω</div>
            <div class="tagline">–í–∞—à–∞ –ª–∏—á–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–∏–ª—å–º–æ–≤</div>
        </div>

        <div class="control-section">
            <input type="text" class="search-input" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤...">
            <div class="button-group">
                <button class="btn btn-primary" onclick="scanMovies()">
                    <span style="font-family: 'Segoe UI Symbol', 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji';">üîÑ</span> –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
                </button>
                <button class="btn btn-secondary" onclick="browseForMovie()">
                    <span style="font-family: 'Segoe UI Symbol', 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji';">‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å
                </button>
            </div>
        </div>

        <div class="stats" id="statsContainer">
            <div class="stat-card">
                <div class="stat-number" id="totalMovies">0</div>
                <div class="stat-label">–§–∏–ª—å–º–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSize">0 –ì–ë</div>
                <div class="stat-label">–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalDuration">0—á</div>
                <div class="stat-label">–û–±—â–µ–µ –≤—Ä–µ–º—è</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgRating">0</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
            </div>
        </div>

        <div class="movies-list" id="moviesContainer">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å–º–æ–≤...</div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å–º</div>
                <button class="close-btn" onclick="closeModal('editModal')">&times;</button>
            </div>
            <form id="editForm">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" class="form-input" id="editTitle" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ñ–∞–Ω—Ä</label>
                    <input type="text" class="form-input" id="editGenre" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ì–æ–¥</label>
                    <input type="number" class="form-input" id="editYear" min="1900" max="2025" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–†–µ–π—Ç–∏–Ω–≥ (0-10)</label>
                    <input type="number" class="form-input" id="editRating" min="0" max="10" step="0.1" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="form-input" id="editDescription" rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editModal')">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ù–æ–≤–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞ -->
    <div class="modal" id="videoPlayerModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="videoPlayerTitle"></div>
                <button class="close-btn" onclick="closeModal('videoPlayerModal')">&times;</button>
            </div>
            <video id="videoPlayer" controls autoplay>
                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTML5 –≤–∏–¥–µ–æ.
            </video>
            <div class="video-info">
                <div class="video-meta" id="videoPlayerMeta"></div>
            </div>
            <div class="video-error-message" id="videoPlayerError"></div>
        </div>
    </div>

    <!-- –í–∞–∂–Ω–æ: –í–∫–ª—é—á–∏—Ç–µ eel.js –ü–ï–†–ï–î –≤–∞—à–∏–º–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ -->
    <script type="text/javascript" src="/eel.js"></script>

    <script>
        let currentMovies = []; // –•—Ä–∞–Ω–∏—Ç —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
        let currentEditingMovie = null; // ID —Ñ–∏–ª—å–º–∞, –∫–æ—Ç–æ—Ä—ã–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è

        // –°–æ–±—ã—Ç–∏–µ: –î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω
        document.addEventListener('DOMContentLoaded', function() {
            loadMovies(); // –ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å–º–æ–≤
            updateStats(); // –ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –≤–≤–æ–¥–∞ –¥–ª—è –ø–æ–ª—è –ø–æ–∏—Å–∫–∞ (–ø–æ–∏—Å–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
            document.getElementById('searchInput').addEventListener('input', function() {
                const query = this.value;
                if (query.length === 0) {
                    displayMovies(currentMovies); // –ï—Å–ª–∏ –ø–æ–∏—Å–∫ –æ—á–∏—â–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å–º—ã
                } else if (query.length >= 2) {
                    searchMovies(query); // –ï—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ 2 –∏–ª–∏ –±–æ–ª–µ–µ —Å–∏–º–≤–æ–ª–æ–≤, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫
                }
            });

            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('videoPlayerModal').addEventListener('click', function(event) {
                if (event.target === this) { // –ï—Å–ª–∏ –∫–ª–∏–∫ –±—ã–ª –ø–æ —Ñ–æ–Ω—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    closeModal('videoPlayerModal');
                }
            });
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–Ω–æ–ø–∫–æ–π 'x'
            document.querySelector('#videoPlayerModal .close-btn').addEventListener('click', function() {
                closeModal('videoPlayerModal');
            });
        });

        async function loadMovies() {
            const container = document.getElementById('moviesContainer');
            container.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å–º–æ–≤...</div>'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

            try {
                // –í—ã–∑—ã–≤–∞–µ–º Python-—Ñ—É–Ω–∫—Ü–∏—é get_movies(), –∫–æ—Ç–æ—Ä–∞—è –≤–µ—Ä–Ω–µ—Ç –æ–±—ä–µ–∫—Ç {success: bool, movies: [...]}
                const result = await eel.get_movies()(); 
                if (result.success) {
                    currentMovies = result.movies; // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
                    displayMovies(currentMovies); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ñ–∏–ª—å–º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    updateStats(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å–º–æ–≤ —Å –±—ç–∫–µ–Ω–¥–∞:', result.error);
                    showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å–º–æ–≤: ' + result.error); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                }
            } catch (error) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ —Å–∞–º–æ–º –≤—ã–∑–æ–≤–µ Eel (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ Python-—Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
                console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ eel.get_movies():', error);
                showError('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∏–ª—å–º–æ–≤. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±—Ä–∞—É–∑–µ—Ä–∞.');
            }
        }

        async function scanMovies() {
            const container = document.getElementById('moviesContainer');
            container.innerHTML = '<div class="loading">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤...</div>'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            
            try {
                // –í—ã–∑–æ–≤ get_movies() –≤ Python –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏
                const result = await eel.get_movies()(); 
                if (result.success) {
                    currentMovies = result.movies;
                    displayMovies(currentMovies);
                    updateStats();
                } else {
                    console.error('–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ —Å –±—ç–∫–µ–Ω–¥–∞:', result.error);
                    showError('–û—à–∏–±–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤: ' + result.error);
                }
            } catch (error) {
                console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ eel.get_movies() –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
                showError('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –±—Ä–∞—É–∑–µ—Ä–∞.');
            }
        }

        async function searchMovies(query) {
            try {
                const results = await eel.search_movies(query)();
                displayMovies(results); // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
                // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –ø–æ–∏—Å–∫–∞, –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã –∏–ª–∏ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            }
        }

        function displayMovies(movies) {
            const container = document.getElementById('moviesContainer');
            
            // –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ —Ñ–∏–ª—å–º–æ–≤ –ø—É—Å—Ç –∏–ª–∏ —Ä–∞–≤–µ–Ω null/undefined
            if (!movies || movies.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>–§–∏–ª—å–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å–º—ã –≤ –ø–∞–ø–∫—É 'movies' –∏ –Ω–∞–∂–º–∏—Ç–µ '–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å'.</p>
                    </div>
                `;
                return;
            }

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–∏–ª—å–º–∞ –≤ –≤–∏–¥–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞
            const moviesHTML = movies.map(movie => `
                <div class="movie-card-item">
                    <div class="poster-thumb">
                        ${movie.thumbnail ? 
                            `<img src="thumbnails/${movie.thumbnail}" alt="${movie.title}" onerror="this.onerror=null;this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMzAwIDQ1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMzMzIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI5MHB4IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIj7wn5y0PC90ZXh0PgogPC9zdmc+'">` :
                            `<div class="movie-poster-placeholder" style="font-size: 30px;">üé¨</div>`
                        }
                    </div>
                    <div class="info">
                        <div class="title" title="${movie.title}">${movie.title}</div>
                        <div class="meta">${movie.genre} ¬∑ ${movie.year} ¬∑ ‚≠ê ${movie.rating}/10</div>
                    </div>
                    <div class="actions">
                        <!-- –ò–∑–º–µ–Ω–µ–Ω–æ: —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ–º playMovie —Å movie.id -->
                        <button class="btn-action play" onclick="playMovie('${movie.id}')">‚ñ∂Ô∏è</button>
                        <button class="btn-action edit" onclick="editMovie('${movie.id}')">‚úèÔ∏è</button>
                        <button class="btn-action delete" onclick="deleteMovie('${movie.id}')">üóëÔ∏è</button>
                    </div>
                </div>
            `).join(''); // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É HTML

            container.innerHTML = `<div class="movies-list">${moviesHTML}</div>`; // –í—Å—Ç–∞–≤–ª—è–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        }

        async function updateStats() {
            try {
                const stats = await eel.get_movies_stats()(); // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ Python
                document.getElementById('totalMovies').textContent = stats.total_movies;
                document.getElementById('totalSize').textContent = formatFileSize(stats.total_size);
                document.getElementById('totalDuration').textContent = formatDuration(stats.total_duration);
                document.getElementById('avgRating').textContent = stats.avg_rating;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
                // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –µ—Å–ª–∏ —ç—Ç–æ –≤–∞–∂–Ω–æ
            }
        }

        async function playMovie(movieId) {
            const videoPlayer = document.getElementById('videoPlayer');
            const videoPlayerTitle = document.getElementById('videoPlayerTitle');
            const videoPlayerMeta = document.getElementById('videoPlayerMeta');
            const videoPlayerError = document.getElementById('videoPlayerError');

            videoPlayerError.textContent = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—à–∏–±–∫–∏
            videoPlayer.pause(); // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ, –µ—Å–ª–∏ –µ—Å—Ç—å
            videoPlayer.removeAttribute('src'); // –£–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–∏–¥–µ–æ
            videoPlayer.load(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –ø–ª–µ–µ—Ä

            try {
                const movie = await eel.get_movie_details(movieId)(); // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ –ø–æ ID
                if (!movie) {
                    videoPlayerError.textContent = '–û—à–∏–±–∫–∞: –§–∏–ª—å–º –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.';
                    document.getElementById('videoPlayerModal').style.display = 'flex';
                    return;
                }

                const result = await eel.prepare_movie_for_playback(movie.path)(); // –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –ø—É—Ç–∏
                
                if (result.success) {
                    const videoPath = result.local_url; // –ü–æ–ª—É—á–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π URL –¥–ª—è –≤–∏–¥–µ–æ

                    videoPlayerTitle.textContent = movie.title;
                    videoPlayerMeta.textContent = `${movie.genre} ¬∑ ${movie.year} ¬∑ ‚≠ê ${movie.rating}/10`;
                    
                    videoPlayer.src = videoPath;
                    videoPlayer.load(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ
                    videoPlayer.play().catch(error => {
                        console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:', error);
                        videoPlayerError.textContent = '–û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–∂–º–∏—Ç–µ "–ò–≥—Ä–∞—Ç—å".';
                    });
                    document.getElementById('videoPlayerModal').style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                } else {
                    videoPlayerError.textContent = '–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è: ' + result.error;
                    document.getElementById('videoPlayerModal').style.display = 'flex';
                }
            } catch (error) {
                console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ —Ñ–∏–ª—å–º–∞:', error);
                videoPlayerError.textContent = '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.';
                document.getElementById('videoPlayerModal').style.display = 'flex';
            }
        }

        async function editMovie(movieId) {
            try {
                const movie = await eel.get_movie_details(movieId)(); // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ —Ñ–∏–ª—å–º–∞ –ø–æ ID
                if (!movie) {
                    alert('–§–∏–ª—å–º –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.'); // –í—Ä–µ–º–µ–Ω–Ω–æ alert, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ UI-—Å–æ–æ–±—â–µ–Ω–∏–µ
                    return;
                }

                currentEditingMovie = movieId; // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ —Ñ–∏–ª—å–º–∞
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è —Ñ–æ—Ä–º—ã —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞
                document.getElementById('editTitle').value = movie.title;
                document.getElementById('editGenre').value = movie.genre;
                document.getElementById('editYear').value = movie.year;
                document.getElementById('editRating').value = movie.rating;
                document.getElementById('editDescription').value = movie.description;
                
                document.getElementById('editModal').style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ' + error.message); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–ª—å–º–∞
        document.getElementById('editForm').addEventListener('submit', async function(e) {
            e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã

            if (!currentEditingMovie) return; // –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–∏–ª—å–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤—ã—Ö–æ–¥–∏–º

            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
            const title = document.getElementById('editTitle').value;
            const genre = document.getElementById('editGenre').value;
            const year = document.getElementById('editYear').value;
            const rating = document.getElementById('editRating').value;
            const description = document.getElementById('editDescription').value;

            try {
                // –í—ã–∑—ã–≤–∞–µ–º Python-—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∏–ª—å–º–µ
                const result = await eel.update_movie_info(currentEditingMovie, title, genre, year, rating, description)();
                if (result.success) {
                    closeModal('editModal'); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                    loadMovies(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                } else {
                    alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + result.error); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                alert('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–∞: ' + error.message); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
            }
        });

        async function deleteMovie(movieId) {
            // –ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∏–ª—å–º? –≠—Ç–æ —Ç–∞–∫–∂–µ —É–¥–∞–ª–∏—Ç —Ñ–∞–π–ª —Ñ–∏–ª—å–º–∞ —Å –¥–∏—Å–∫–∞ –∏ –µ–≥–æ –ø—Ä–µ–≤—å—é.')) {
                return;
            }

            try {
                const result = await eel.delete_movie(movieId)(); // –í—ã–∑—ã–≤–∞–µ–º Python-—Ñ—É–Ω–∫—Ü–∏—é —É–¥–∞–ª–µ–Ω–∏—è
                if (result.success) {
                    loadMovies(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
                    alert('–§–∏–ª—å–º —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!'); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
                } else {
                    alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ' + result.error); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
                alert('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞: ' + error.message); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
            }
        }

        async function browseForMovie() {
            try {
                const result = await eel.browse_for_movie()(); // –í—ã–∑—ã–≤–∞–µ–º Python-—Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–∏–∞–ª–æ–≥–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
                if (result.success) {
                    loadMovies(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∏–ª—å–º—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                    alert('–§–∏–ª—å–º —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é!'); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
                } else {
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –≤—ã–±–æ—Ä –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞
                    if (result.error !== '–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω.') { // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º alert, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ –æ—Ç–º–µ–Ω–∏–ª
                        alert('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: ' + result.error); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞:', error);
                alert('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∏–ª—å–º–∞: ' + error.message); // –í—Ä–µ–º–µ–Ω–Ω–æ alert
            }
        }

        // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                // –ï—Å–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä–∞, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–µ–æ
                if (modalId === 'videoPlayerModal') {
                    const videoPlayer = document.getElementById('videoPlayer');
                    videoPlayer.pause();
                    videoPlayer.removeAttribute('src');
                    videoPlayer.load();
                }
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function formatDuration(seconds) {
            if (seconds <= 0) return "0–º";
            
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            let parts = [];
            if (hours > 0) {
                parts.push(`${hours}—á`);
            }
            if (minutes > 0 || (hours === 0 && seconds > 0)) { // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–∏–Ω—É—Ç—ã, –¥–∞–∂–µ –µ—Å–ª–∏ 0, –µ—Å–ª–∏ –Ω–µ—Ç —á–∞—Å–æ–≤ –∏ –µ—Å—Ç—å —Å–µ–∫—É–Ω–¥—ã
                parts.push(`${minutes}–º`);
            }
            return parts.join(' ');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
        function formatFileSize(bytes) {
            if (bytes <= 0) return "0 –ë";
            
            const units = ['–ë', '–ö–ë', '–ú–ë', '–ì–ë', '–¢–ë'];
            let size = bytes;
            let unitIndex = 0;
            
            while (size >= 1024 && unitIndex < units.length - 1) {
                size /= 1024;
                unitIndex++;
            }
            
            return `${size.toFixed(1)} ${units[unitIndex]}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–∞ UI
        function showError(message) {
            const container = document.getElementById('moviesContainer');
            container.innerHTML = `
                <div class="empty-state">
                    <h3>–û—à–∏–±–∫–∞</h3>
                    <p>${message}</p>
                    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å Python (—Ç–µ—Ä–º–∏–Ω–∞–ª, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω main.py) –¥–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                </div>
            `;
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const editModal = document.getElementById('editModal');
            const videoPlayerModal = document.getElementById('videoPlayerModal');

            if (event.target === editModal) {
                closeModal('editModal');
            }
            if (event.target === videoPlayerModal) {
                closeModal('videoPlayerModal');
            }
        }
    </script>
</body>
</html>
